{% extends "layout.html" %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.css">
{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card shadow">
            <div class="card-body">
                <h1 class="card-title text-center mb-4">Audio Transcription</h1>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="upload-container">
                            <h3><i class="fas fa-cloud-upload-alt"></i> Upload Audio</h3>
                            <p class="text-muted">Upload MP3 or WAV files for transcription</p>
                            
                            <div id="upload-drop-area" class="drop-area">
                                <form id="audio-upload-form" class="upload-form">
                                    <input type="file" id="file-input" accept=".mp3,.wav" class="file-input" />
                                    <label for="file-input" class="file-label">
                                        <div class="file-icon">
                                            <i class="fas fa-file-audio fa-3x"></i>
                                        </div>
                                        <div class="file-text">
                                            <strong>Choose a file</strong> or drag it here
                                        </div>
                                        <div class="file-types">
                                            Supported formats: MP3, WAV
                                        </div>
                                    </label>
                                </form>
                            </div>
                            
                            <div id="upload-progress-container" class="progress mt-3 d-none">
                                <div id="upload-progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" 
                                     role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                            </div>
                            
                            <div id="upload-status" class="alert mt-3 d-none"></div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="transcription-container">
                            <h3><i class="fas fa-file-alt"></i> Transcription</h3>
                            <p class="text-muted">Your transcribed text will appear here</p>
                            
                            <div id="transcription-box" class="transcription-box">
                                <div id="transcription-placeholder" class="text-center py-5">
                                    <i class="fas fa-comment-alt fa-3x mb-3 text-muted"></i>
                                    <p>Upload an audio file to see the transcription</p>
                                </div>
                                <div id="transcription-content" class="d-none">
                                    <div class="transcription-header">
                                        <h4 id="transcription-filename">Filename.mp3</h4>
                                        <div class="transcription-actions">
                                            <button id="copy-transcription" class="btn btn-sm btn-outline-primary">
                                                <i class="fas fa-copy"></i> Copy
                                            </button>
                                            <button id="download-transcription" class="btn btn-sm btn-outline-success">
                                                <i class="fas fa-download"></i> Download
                                            </button>
                                        </div>
                                    </div>
                                    <div id="transcription-text" class="transcription-text"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-4">
                    <div class="col-12 text-center">
                        <div class="card bg-light">
                            <div class="card-body">
                                <h5><i class="fas fa-info-circle"></i> How It Works</h5>
                                <ol class="text-start instruction-list">
                                    <li>Upload an MP3 or WAV audio file using the panel on the left</li>
                                    <li>MP3 files will be automatically converted to WAV format</li>
                                    <li>The file will be sent to the transcription service</li>
                                    <li>Once processing is complete, your transcription will appear on the right</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}
